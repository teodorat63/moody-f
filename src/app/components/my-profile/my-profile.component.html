<body>
  <div id="profile-info" class="profile">
    @if (isLoading) {
    <p>Loading...</p>
    } @else { @if (!data) {
    <p>Profile couldn't be loaded</p>
    } @else {

    <p>Id: {{ data?.id }}</p>

    <form #f="ngForm" (ngSubmit)="save(f)" novalidate>
      <div class="field">
        <label for="name">Name</label>
        <input
          id="name"
          name="name"
          type="text"
          required
          maxlength="100"
          [(ngModel)]="formModel.name"
          [disabled]="isSaving || isDeleting"
          #name="ngModel"
        />
        @if (name.invalid && (name.touched || f.submitted)) {
        <small class="error">Name is required</small>
        }
      </div>

      <div class="field">
        <label for="email">Email</label>
        <input
          id="email"
          name="email"
          type="email"
          required
          email
          [(ngModel)]="formModel.email"
          [disabled]="isSaving || isDeleting"
          #email="ngModel"
        />
        @if (email.invalid && (email.touched || f.submitted)) {
        <small class="error">Enter valid e-mail.</small>
        }
      </div>

      <div class="actions">
        <button type="submit" [disabled]="f.invalid || isSaving || isDeleting">
          {{ isSaving ? "Saving…" : "Save" }}
        </button>

        <button
          type="button"
          class="danger"
          (click)="delete()"
          [disabled]="isSaving || isDeleting"
        >
          {{ isDeleting ? "Deleting…" : "Delete" }}
        </button>
      </div>

      @if (successMsg) {
      <p class="success">{{ successMsg }}</p>
      } @if (errorMsg) {
      <p class="error">{{ errorMsg }}</p>
      }
    </form>
    } }
  </div>
</body>
